((D,_,m,C)=>{D(m).ready(function(){D(".better-chat-support-admin").removeClass("better-chat-support-preloader")});var t=D(".better-chat-support-field-layout_preset .better-chat-support-siblings .better-chat-support--sibling"),e=D(".better-chat-support-field-layout_preset .better-chat-support-siblings .better-chat-support--sibling.better-chat-support--active").find("input").val(),O=("button"==e||"advance_button"==e?(D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(2)").hide(),D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(1)").trigger("click")):D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(2)").show(),D(t).on("change","input",function(t){var e=D(this).val();"button"==e||"advance_button"==e?(D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(2)").hide(),D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(1)").trigger("click")):D(".better-chat-support-content .floating_chat .better-chat-support-section_tab-nav a:nth-child(2)").show()}),{});O.funcs={},O.vars={onloaded:!1,$body:D("body"),$window:D(_),$document:D(m),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:D("body").hasClass("rtl")},O.helper={uid:function(t){return(t||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(t){return(t+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,e){var r=new RegExp(O.helper.preg_quote(e+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){D(this).find(":input").each(function(){this.name=this.name.replace(r,e+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(a,o,n){var i;return function(){var t=this,e=arguments,r=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||a.apply(t,e)},o),r&&a.apply(t,e)}}},D.fn.BetterChatSupport_clone=function(){for(var t=D.fn.clone.apply(this,arguments),e=this.find("select").add(this.filter("select")),r=t.find("select").add(t.filter("select")),a=0;a<e.length;++a)for(var o=0;o<e[a].options.length;++o)!0===e[a].options[o].selected&&(r[a].options[o].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},D.fn.BetterChatSupport_expand_all=function(){return this.each(function(){D(this).on("click",function(t){t.preventDefault(),D(".better-chat-support-wrapper").toggleClass("better-chat-support-show-all"),D(".better-chat-support-section").BetterChatSupport_reload_script(),D(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},D.fn.BetterChatSupport_nav_options=function(){return this.each(function(){var r,t=D(this),e=D(_),a=D("#wpwrap"),o=t.find("a");e.on("hashchange better-chat-support.hashchange",function(){var t=_.location.hash.replace("#tab=",""),t=t||o.first().attr("href").replace("#tab=",""),e=D('[data-tab-id="'+t+'"]');e.length&&(e.closest(".better-chat-support-tab-item").addClass("better-chat-support-tab-expanded").siblings().removeClass("better-chat-support-tab-expanded"),e.next().is("ul")&&(t=(e=e.next().find("li").first().find("a")).data("tab-id")),o.removeClass("better-chat-support-active"),e.addClass("better-chat-support-active"),r&&r.addClass("hidden"),(e=D('[data-section-id="'+t+'"]')).removeClass("hidden"),e.BetterChatSupport_reload_script(),D(".better-chat-support-section-id").val(e.index()+1),r=e,a.hasClass("wp-responsive-open"))&&(D("html, body").animate({scrollTop:e.offset().top-50},200),a.removeClass("wp-responsive-open"))}).trigger("better-chat-support.hashchange")})},D.fn.BetterChatSupport_nav_metabox=function(){return this.each(function(){var r,t=D(this),a=t.find("a"),o=t.parent().find(".better-chat-support-section");a.each(function(e){D(this).on("click",function(t){t.preventDefault();t=D(this),a.removeClass("better-chat-support-active"),t.addClass("better-chat-support-active"),r!==C&&r.addClass("hidden"),t=o.eq(e);t.removeClass("hidden"),t.BetterChatSupport_reload_script(),r=t})}),a.first().trigger("click")})},D.fn.BetterChatSupport_page_templates=function(){this.length&&D(m).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=D(this).val()||"default";D(".better-chat-support-page-templates").removeClass("better-chat-support-metabox-show").addClass("better-chat-support-metabox-hide"),D(".better-chat-support-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("better-chat-support-metabox-hide").addClass("better-chat-support-metabox-show")})},D.fn.BetterChatSupport_post_formats=function(){this.length&&D(m).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t="0"===(t=D(this).val()||"default")?"default":t;D(".better-chat-support-post-formats").removeClass("better-chat-support-metabox-show").addClass("better-chat-support-metabox-hide"),D(".better-chat-support-post-format-"+t).removeClass("better-chat-support-metabox-hide").addClass("better-chat-support-metabox-show")})},D.fn.BetterChatSupport_search=function(){return this.each(function(){D(this).find("input").on("change keyup",function(){var e=D(this).val(),t=D(".better-chat-support-wrapper"),r=t.find(".better-chat-support-section").find("> .better-chat-support-field:not(.better-chat-support-depend-on)"),a=r.find("> .better-chat-support-title, .better-chat-support-search-tags");3<e.length?(r.addClass("better-chat-support-metabox-hide"),t.addClass("better-chat-support-search-all"),a.each(function(){var t=D(this);t.text().match(new RegExp(".*?"+e+".*?","i"))&&((t=t.closest(".better-chat-support-field")).removeClass("better-chat-support-metabox-hide"),t.parent().BetterChatSupport_reload_script())})):(r.removeClass("better-chat-support-metabox-hide"),t.removeClass("better-chat-support-search-all"))})})},D.fn.BetterChatSupport_sticky=function(){return this.each(function(){function t(){p=a.scrollTop(),c()}var r=D(this),a=D(_),o=r.find(".better-chat-support-header-inner"),n=parseInt(o.css("padding-left"))+parseInt(o.css("padding-right")),i=32,p=0,e=!1,s=function(){var t=r.offset().top,t=Math.max(i,t-p),e=a.innerWidth();t<=i&&782<e?(o.css({width:r.outerWidth()-n}),r.css({height:r.outerHeight()}).addClass("better-chat-support-sticky")):(o.removeAttr("style"),r.removeAttr("style").removeClass("better-chat-support-sticky"))},c=function(){e||requestAnimationFrame(function(){s(),e=!1}),e=!0};a.on("scroll resize",t),t()})},D.fn.BetterChatSupport_dependency=function(){return this.each(function(){var e,r,s,c,t=D(this),a=t.children("[data-controller]");a.length&&(e=D.BetterChatSupport_deps.createRuleset(),r=D.BetterChatSupport_deps.createRuleset(),s=[],c=[],a.each(function(){var a=D(this),t=a.data("controller").split("|"),o=a.data("condition").split("|"),n=a.data("value").toString().split("|"),i=!!a.data("depend-global"),p=i?r:e;D.each(t,function(t,e){var r=n[t]||"",t=o[t]||o[0];(p=p.createRule('[data-depend-id="'+e+'"]',t,r)).include(a),(i?c:s).push(e)})}),s.length&&D.BetterChatSupport_deps.enable(t,e,s),c.length)&&D.BetterChatSupport_deps.enable(O.vars.$body,r,c)})},D.fn.BetterChatSupport_field_accordion=function(){return this.each(function(){D(this).find(".better-chat-support-accordion-title").on("click",function(){var t=D(this),e=t.find(".better-chat-support-accordion-icon"),t=t.next();e.hasClass("fa-angle-right")?e.removeClass("fa-angle-right").addClass("fa-angle-down"):e.removeClass("fa-angle-down").addClass("fa-angle-right"),t.data("opened")||(t.BetterChatSupport_reload_script(),t.data("opened",!0)),t.toggleClass("better-chat-support-accordion-open")})})},D.fn.BetterChatSupport_field_backup=function(){return this.each(function(){var e,r,a,o;_.wp.customize!==C&&(r=D(e=this),D("body"),a=r.find(".better-chat-support-import"),o=r.find(".better-chat-support-reset"),e.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(t){t._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("BetterChatSupport_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},o.on("click",function(t){t.preventDefault(),O.vars.is_confirm&&(e.notificationOverlay(),_.wp.ajax.post("better-chat-support-reset",{unique:o.data("unique"),nonce:o.data("nonce")}).done(function(t){_.location.reload(!0)}).fail(function(t){alert(t.error),wp.customize.notifications.remove("BetterChatSupport_field_backup_notification")}))}),a.on("click",function(t){t.preventDefault(),O.vars.is_confirm&&(e.notificationOverlay(),_.wp.ajax.post("better-chat-support-import",{unique:a.data("unique"),nonce:a.data("nonce"),data:r.find(".better-chat-support-import-data").val()}).done(function(t){_.location.reload(!0)}).fail(function(t){alert(t.error),wp.customize.notifications.remove("BetterChatSupport_field_backup_notification")}))}))})},D.fn.BetterChatSupport_field_background=function(){return this.each(function(){D(this).find(".better-chat-support--background-image").BetterChatSupport_reload_script()})},D.fn.BetterChatSupport_field_code_editor=function(){return this.each(function(){var e,a,t,o,n;"function"==typeof CodeMirror&&(e=D(this),a=e.find("textarea"),t=e.find(".CodeMirror"),o=a.data("editor"),t.length&&t.remove(),n=setInterval(function(){var r,t;e.is(":visible")&&(r=CodeMirror.fromTextArea(a[0],o),"default"!==o.theme&&-1===O.vars.code_themes.indexOf(o.theme)&&(t=D("<link>"),D("#better-chat-support-codemirror-css").after(t),t.attr({rel:"stylesheet",id:"better-chat-support-codemirror-"+o.theme+"-css",href:o.cdnURL+"/theme/"+o.theme+".min.css",type:"text/css",media:"all"}),O.vars.code_themes.push(o.theme)),CodeMirror.modeURL=o.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(r,o.mode),r.on("change",function(t,e){a.val(r.getValue()).trigger("change")}),clearInterval(n))}))})},D.fn.BetterChatSupport_field_date=function(){return this.each(function(){var t=D(this),r=t.find("input"),a=t.find(".better-chat-support-date-settings").data("settings"),a=D.extend({},a,{showAnim:"",beforeShow:function(t,e){D(e.dpDiv).addClass("better-chat-support-datepicker-wrapper")},onClose:function(t,e){D(e.dpDiv).removeClass("better-chat-support-datepicker-wrapper")}});2===r.length&&(a=D.extend({},a,{onSelect:function(t){D(this),r.first();var e=r.first().attr("id")===D(this).attr("id")?"minDate":"maxDate",t=D.datepicker.parseDate(a.dateFormat,t);r.not(this).datepicker("option",e,t)}})),r.each(function(){var t=D(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(a)})})},D.fn.BetterChatSupport_field_datetime=function(){return this.each(function(){var t=D(this),a=t.find("input"),e=t.find(".better-chat-support-datetime-settings").data("settings"),e=D.extend({},e,{onReady:function(t,e,r){D(r.calendarContainer).addClass("better-chat-support-flatpickr")}});2===a.length&&(e=D.extend({},e,{onChange:function(t,e,r){"from"===D(r.element).data("type")?a.last().get(0)._flatpickr.set("minDate",t[0]):a.first().get(0)._flatpickr.set("maxDate",t[0])}})),a.each(function(){D(this).flatpickr(e)})})},D.fn.BetterChatSupport_field_fieldset=function(){return this.each(function(){D(this).find(".better-chat-support-fieldset-content").BetterChatSupport_reload_script()})},D.fn.BetterChatSupport_field_gallery=function(){return this.each(function(){var o,t=D(this),n=t.find(".better-chat-support-edit-gallery"),i=t.find(".better-chat-support-clear-gallery"),p=t.find("ul"),s=t.find("input");t.find("img");t.on("click",".better-chat-support-button, .better-chat-support-edit-gallery",function(t){var e=D(this),r=s.val(),e=e.hasClass("better-chat-support-edit-gallery")?"edit":"add",a="add"!=e||r.length?"gallery-edit":"gallery";t.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&("gallery"==a?(o=_.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(o=_.wp.media.gallery.edit('[gallery ids="'+r+'"]'),"add"==e&&o.setState("gallery-library")),o.on("update",function(t){p.empty();t=t.models.map(function(t){var t=t.toJSON(),e=(t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail:t).url;return p.append('<li><img src="'+e+'"></li>'),t.id});s.val(t.join(",")).trigger("change"),i.removeClass("hidden"),n.removeClass("hidden")}))}),i.on("click",function(t){t.preventDefault(),p.empty(),s.val("").trigger("change"),i.addClass("hidden"),n.addClass("hidden")})})},D.fn.BetterChatSupport_field_group=function(){return this.each(function(){function t(t){t.preventDefault();var e,r,a,o,t=n.children(".better-chat-support-cloneable-item").length;p.hide(),d&&d<t+1?i.show():(e=(t=D(this).parent().parent()).children(".better-chat-support-cloneable-helper").BetterChatSupport_clone(!0),r=t.children(".better-chat-support-cloneable-title").BetterChatSupport_clone(),a=t.children(".better-chat-support-cloneable-content").BetterChatSupport_clone(),(o=D('<div class="better-chat-support-cloneable-item" />')).append(e),o.append(r),o.append(a),n.children().eq(t.index()).after(o),O.helper.name_nested_replace(n.children(".better-chat-support-cloneable-item"),l),n.accordion("refresh"),n.BetterChatSupport_customizer_refresh(),n.BetterChatSupport_customizer_listen({closest:!0}),h&&f(n))}function e(t){t.preventDefault(),t=n.children(".better-chat-support-cloneable-item").length,i.hide(),p.hide(),u&&t-1<u?p.show():(D(this).closest(".better-chat-support-cloneable-item").remove(),O.helper.name_nested_replace(n.children(".better-chat-support-cloneable-item"),l),n.BetterChatSupport_customizer_refresh(),h&&f(n))}var r=D(this),a=r.children(".better-chat-support-fieldset"),a=a.length?a:r,n=a.children(".better-chat-support-cloneable-wrapper"),o=a.children(".better-chat-support-cloneable-hidden"),i=a.children(".better-chat-support-cloneable-max"),p=a.children(".better-chat-support-cloneable-min"),s=n.data("title-by"),c=n.data("title-by-prefix"),l=n.data("field-id"),h=Boolean(Number(n.data("title-number"))),d=parseInt(n.data("max")),u=parseInt(n.data("min")),f=(n.hasClass("ui-accordion")&&n.find(".ui-accordion-header-icon").remove(),function(t){t.find(".better-chat-support-cloneable-title-number").each(function(t){D(this).html(D(this).closest(".better-chat-support-cloneable-item").index()+1+".")})});n.accordion({header:"> .better-chat-support-cloneable-item > .better-chat-support-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"better-chat-support-cloneable-header-icon icofont-simple-right",activeHeader:"better-chat-support-cloneable-header-icon icofont-rounded-down"},activate:function(t,e){var a,o,r=e.newPanel,e=e.newHeader;r.length&&!r.data("opened")?(a=e.find(".better-chat-support-cloneable-value"),o=[],D.each(s,function(t,e){o.push(r.find('[data-depend-id="'+e+'"]'))}),D.each(o,function(t,e){e.on("change keyup better-chat-support.keyup",function(){var r=[];D.each(o,function(t,e){e=e.val();e&&r.push(e)}),r.length&&a.text(r.join(c))}).trigger("better-chat-support.keyup")}),r.BetterChatSupport_reload_script(),r.data("opened",!0),r.data("retry",!1)):r.data("retry")&&(r.BetterChatSupport_reload_script_retry(),r.data("retry",!1))}}),n.sortable({axis:"y",handle:".better-chat-support-cloneable-title,.better-chat-support-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(t,e){n.accordion({active:!1}),n.sortable("refreshPositions"),e.item.children(".better-chat-support-cloneable-content").data("retry",!0)},update:function(t,e){O.helper.name_nested_replace(n.children(".better-chat-support-cloneable-item"),l),n.BetterChatSupport_customizer_refresh(),h&&f(n)}}),a.children(".better-chat-support-cloneable-add").on("click",function(t){t.preventDefault();var e=n.children(".better-chat-support-cloneable-item").length;p.hide(),d&&d<e+1?i.show():((t=o.BetterChatSupport_clone(!0)).removeClass("better-chat-support-cloneable-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(l+"[0]",l+"["+e+"]")}),n.append(t),n.accordion("refresh"),n.accordion({active:e}),n.BetterChatSupport_customizer_refresh(),n.BetterChatSupport_customizer_listen({closest:!0}),h&&f(n))}),n.children(".better-chat-support-cloneable-item").children(".better-chat-support-cloneable-helper").on("click",".better-chat-support-cloneable-clone",t),a.children(".better-chat-support-cloneable-hidden").children(".better-chat-support-cloneable-helper").on("click",".better-chat-support-cloneable-clone",t);n.children(".better-chat-support-cloneable-item").children(".better-chat-support-cloneable-helper").on("click",".better-chat-support-cloneable-remove",e),a.children(".better-chat-support-cloneable-hidden").children(".better-chat-support-cloneable-helper").on("click",".better-chat-support-cloneable-remove",e)})},D.fn.BetterChatSupport_field_icon=function(){return this.each(function(){var r=D(this);r.on("click",".better-chat-support-icon-add",function(t){t.preventDefault();var t=D(this),e=D("#better-chat-support-modal-icon");e.removeClass("hidden"),O.vars.$icon_target=r,O.vars.icon_modal_loaded||(e.find(".better-chat-support-modal-loading").show(),_.wp.ajax.post("better-chat-support-get-icons",{nonce:t.data("nonce")}).done(function(t){e.find(".better-chat-support-modal-loading").hide(),O.vars.icon_modal_loaded=!0;var r=e.find(".better-chat-support-modal-load").html(t.content);r.on("click","i",function(t){t.preventDefault();t=D(this).attr("title");O.vars.$icon_target.find(".better-chat-support-icon-preview i").removeAttr("class").addClass(t),O.vars.$icon_target.find(".better-chat-support-icon-preview").removeClass("hidden"),O.vars.$icon_target.find(".better-chat-support-icon-remove").removeClass("hidden"),O.vars.$icon_target.find("input").val(t).trigger("change"),e.addClass("hidden")}),e.on("change keyup",".better-chat-support-icon-search",function(){var e=D(this).val();r.find("i").each(function(){var t=D(this);t.attr("title").search(new RegExp(e,"i"))<0?t.hide():t.show()})}),e.on("click",".better-chat-support-modal-close, .better-chat-support-modal-overlay",function(){e.addClass("hidden")})}).fail(function(t){e.find(".better-chat-support-modal-loading").hide(),e.find(".better-chat-support-modal-load").html(t.error),e.on("click",function(){e.addClass("hidden")})}))}),r.on("click",".better-chat-support-icon-remove",function(t){t.preventDefault(),r.find(".better-chat-support-icon-preview").addClass("hidden"),r.find("input").val("").trigger("change"),D(this).addClass("hidden")})})},D.fn.BetterChatSupport_field_map=function(){return this.each(function(){var t,e,r,a,o,n,i,p,s,c,l;"undefined"!=typeof L&&(l=(t=D(this)).find(".better-chat-support--map-osm"),e=t.find(".better-chat-support--map-search input"),r=t.find(".better-chat-support--latitude"),a=t.find(".better-chat-support--longitude"),o=t.find(".better-chat-support--zoom"),n=l.data("map"),i=L.map(l.get(0),n),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),p=L.marker(n.center,{draggable:!0}).addTo(i),s=function(t){r.val(t.lat),a.val(t.lng),o.val(i.getZoom())},i.on("click",function(t){p.setLatLng(t.latlng),s(t.latlng)}),i.on("zoom",function(){s(p.getLatLng())}),p.on("drag",function(){s(p.getLatLng())}),e.length||(e=D('[data-depend-id="'+t.find(".better-chat-support--address-field").data("address-field")+'"]')),c={},e.autocomplete({source:function(t,e){var r=t.term;r in c?e(c[r]):D.get("https://nominatim.openstreetmap.org/search",{format:"json",q:r},function(t){t=t.length?t.map(function(t){return{value:t.display_name,label:t.display_name,lat:t.lat,lon:t.lon}},"json"):[{value:"no-data",label:"No Results."}];c[r]=t,e(t)})},select:function(t,e){if("no-data"===e.item.value)return!1;e=L.latLng(e.item.lat,e.item.lon);i.panTo(e),p.setLatLng(e),s(e)},create:function(t,e){D(this).autocomplete("widget").addClass("better-chat-support-map-ui-autocomplate")}}),r.on("change",l=function(){var t=L.latLng(r.val(),a.val());i.panTo(t),p.setLatLng(t)}),a.on("change",l))})},D.fn.BetterChatSupport_field_link=function(){return this.each(function(){var a=D(this),t=a.find(".better-chat-support--link"),o=a.find(".better-chat-support--add"),n=a.find(".better-chat-support--edit"),i=a.find(".better-chat-support--remove"),p=a.find(".better-chat-support--result"),e=O.helper.uid("better-chat-support-wplink-textarea-");o.on("click",function(t){t.preventDefault(),_.wpLink.open(e)}),n.on("click",function(t){t.preventDefault(),o.trigger("click"),D("#wp-link-url").val(a.find(".better-chat-support--url").val()),D("#wp-link-text").val(a.find(".better-chat-support--text").val()),D("#wp-link-target").prop("checked","_blank"===a.find(".better-chat-support--target").val())}),i.on("click",function(t){t.preventDefault(),a.find(".better-chat-support--url").val("").trigger("change"),a.find(".better-chat-support--text").val(""),a.find(".better-chat-support--target").val(""),o.removeClass("hidden"),n.addClass("hidden"),i.addClass("hidden"),p.parent().addClass("hidden")}),t.attr("id",e).on("change",function(){var t=_.wpLink.getAttrs(),e=t.href,r=D("#wp-link-text").val(),t=t.target||"";a.find(".better-chat-support--url").val(e).trigger("change"),a.find(".better-chat-support--text").val(r),a.find(".better-chat-support--target").val(t),p.html('{url:"'+e+'", text:"'+r+'", target:"'+t+'"}'),o.addClass("hidden"),n.removeClass("hidden"),i.removeClass("hidden"),p.parent().removeClass("hidden")})})},D.fn.BetterChatSupport_field_media=function(){return this.each(function(){var r,a=D(this),o=a.find(".better-chat-support--button"),n=a.find(".better-chat-support--remove"),i=o.data("library")&&o.data("library").split(",")||"",p=!!a.hasClass("better-chat-support-assign-field-background")&&a.closest(".better-chat-support-field-background").find(".better-chat-support--auto-attributes");o.on("click",function(t){t.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&(r||(r=_.wp.media({library:{type:i}})).on("select",function(){var t=r.state().get("selection").first().attributes,e=o.data("preview-size")||"thumbnail";i.length&&-1===i.indexOf(t.subtype)&&-1===i.indexOf(t.type)||(a.find(".better-chat-support--id").val(t.id),a.find(".better-chat-support--width").val(t.width),a.find(".better-chat-support--height").val(t.height),a.find(".better-chat-support--alt").val(t.alt),a.find(".better-chat-support--title").val(t.title),a.find(".better-chat-support--description").val(t.description),e=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===e?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,p&&p.removeClass("better-chat-support--attributes-hidden"),n.removeClass("hidden"),a.find(".better-chat-support--preview").removeClass("hidden"),a.find(".better-chat-support--src").attr("src",e),a.find(".better-chat-support--thumbnail").val(e),a.find(".better-chat-support--url").val(t.url).trigger("change"))}),r.open())}),n.on("click",function(t){t.preventDefault(),p&&p.addClass("better-chat-support--attributes-hidden"),n.addClass("hidden"),a.find("input").val(""),a.find(".better-chat-support--preview").addClass("hidden"),a.find(".better-chat-support--url").trigger("change")})})},D.fn.BetterChatSupport_field_repeater=function(){return this.each(function(){function t(t){t.preventDefault();var e,r,a,t=o.children(".better-chat-support-repeater-item").length;p.hide(),c&&c<t+1?i.show():(e=(t=D(this).parent().parent().parent()).children(".better-chat-support-repeater-content").BetterChatSupport_clone(),r=t.children(".better-chat-support-repeater-helper").BetterChatSupport_clone(!0),(a=D('<div class="better-chat-support-repeater-item" />')).append(e),a.append(r),o.children().eq(t.index()).after(a),a.children(".better-chat-support-repeater-content").BetterChatSupport_reload_script(),O.helper.name_nested_replace(o.children(".better-chat-support-repeater-item"),s),o.BetterChatSupport_customizer_refresh(),o.BetterChatSupport_customizer_listen({closest:!0}))}function e(t){t.preventDefault(),t=o.children(".better-chat-support-repeater-item").length,i.hide(),p.hide(),l&&t-1<l?p.show():(D(this).closest(".better-chat-support-repeater-item").remove(),O.helper.name_nested_replace(o.children(".better-chat-support-repeater-item"),s),o.BetterChatSupport_customizer_refresh())}var r=D(this),a=r.children(".better-chat-support-fieldset"),a=a.length?a:r,o=a.children(".better-chat-support-repeater-wrapper"),n=a.children(".better-chat-support-repeater-hidden"),i=a.children(".better-chat-support-repeater-max"),p=a.children(".better-chat-support-repeater-min"),s=o.data("field-id"),c=parseInt(o.data("max")),l=parseInt(o.data("min"));o.children(".better-chat-support-repeater-item").children(".better-chat-support-repeater-content").BetterChatSupport_reload_script(),o.sortable({axis:"y",handle:".better-chat-support-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,e){O.helper.name_nested_replace(o.children(".better-chat-support-repeater-item"),s),o.BetterChatSupport_customizer_refresh(),e.item.BetterChatSupport_reload_script_retry()}}),a.children(".better-chat-support-repeater-add").on("click",function(t){t.preventDefault();var e=o.children(".better-chat-support-repeater-item").length;p.hide(),c&&c<e+1?i.show():((t=n.BetterChatSupport_clone(!0)).removeClass("better-chat-support-repeater-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(s+"[0]",s+"["+e+"]")}),o.append(t),t.children(".better-chat-support-repeater-content").BetterChatSupport_reload_script(),o.BetterChatSupport_customizer_refresh(),o.BetterChatSupport_customizer_listen({closest:!0}))}),o.children(".better-chat-support-repeater-item").children(".better-chat-support-repeater-helper").on("click",".better-chat-support-repeater-clone",t),a.children(".better-chat-support-repeater-hidden").children(".better-chat-support-repeater-helper").on("click",".better-chat-support-repeater-clone",t);o.children(".better-chat-support-repeater-item").children(".better-chat-support-repeater-helper").on("click",".better-chat-support-repeater-remove",e),a.children(".better-chat-support-repeater-hidden").children(".better-chat-support-repeater-helper").on("click",".better-chat-support-repeater-remove",e)})},D.fn.BetterChatSupport_field_slider=function(){return this.each(function(){var t=D(this),r=t.find("input"),e=t.find(".better-chat-support-slider-ui"),t=r.data(),a=r.val()||0;e.hasClass("ui-slider")&&e.empty(),e.slider({range:"min",value:a,min:t.min||0,max:t.max||100,step:t.step||1,slide:function(t,e){r.val(e.value).trigger("change")}}),r.on("keyup",function(){e.slider("value",r.val())})})},D.fn.BetterChatSupport_field_sortable=function(){return this.each(function(){var r=D(this).find(".better-chat-support-sortable");r.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,e){r.BetterChatSupport_customizer_refresh()}}),r.find(".better-chat-support-sortable-content").BetterChatSupport_reload_script()})},D.fn.BetterChatSupport_field_sorter=function(){return this.each(function(){var a=D(this),t=a.find(".better-chat-support-enabled"),e=a.find(".better-chat-support-disabled"),e=!!e.length&&e;t.sortable({connectWith:e,placeholder:"ui-sortable-placeholder",update:function(t,e){var r=e.item.find("input");e.item.parent().hasClass("better-chat-support-enabled")?r.attr("name",r.attr("name").replace("disabled","enabled")):r.attr("name",r.attr("name").replace("enabled","disabled")),a.BetterChatSupport_customizer_refresh()}}),e&&e.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(t,e){a.BetterChatSupport_customizer_refresh()}})})},D.fn.BetterChatSupport_field_spinner=function(){return this.each(function(){var t=D(this),r=t.find("input"),t=t.find(".ui-button"),a=r.data();t.length&&t.remove(),r.spinner({min:a.min||0,max:a.max||100,step:a.step||1,create:function(t,e){a.unit&&r.after('<span class="ui-button better-chat-support--unit">'+a.unit+"</span>")},spin:function(t,e){r.val(e.value).trigger("change")}})})},D.fn.BetterChatSupport_field_switcher=function(){return this.each(function(){var r=D(this).find(".better-chat-support--switcher");r.on("click",function(){var t=0,e=r.find("input");r.hasClass("better-chat-support--active")?r.removeClass("better-chat-support--active"):(t=1,r.addClass("better-chat-support--active")),e.val(t).trigger("change")})})},D.fn.BetterChatSupport_field_tabbed=function(){return this.each(function(){var t=D(this),e=t.find(".better-chat-support-tabbed-nav a"),r=t.find(".better-chat-support-tabbed-content");r.eq(0).BetterChatSupport_reload_script(),e.on("click",function(t){t.preventDefault();var t=D(this),e=t.index(),e=r.eq(e);t.addClass("better-chat-support-tabbed-active").siblings().removeClass("better-chat-support-tabbed-active"),e.BetterChatSupport_reload_script(),e.removeClass("hidden").siblings().addClass("hidden")})})},D.fn.BetterChatSupport_field_section_tab=function(){return this.each(function(){var t=D(this),r=t.find(".better-chat-support-section_tab-nav a"),a=t.find(".better-chat-support-section_tab-content");a.eq(0).BetterChatSupport_reload_script(),r.on("click",function(t){t.preventDefault();var t=D(this),e=t.index(),e=a.eq(e);r.removeClass("better-chat-support-section_tab-active"),t.addClass("better-chat-support-section_tab-active"),e.BetterChatSupport_reload_script(),e.removeClass("hidden").siblings().addClass("hidden")})})},D.fn.BetterChatSupport_field_typography=function(){return this.each(function(){var w=this,k=D(this),a=[],x=BetterChatSupport_typography_json.webfonts,e=BetterChatSupport_typography_json.googlestyles,z=BetterChatSupport_typography_json.defaultstyles;w.sanitize_subset=function(t){return t=(t=t.replace("-ext"," Extended")).charAt(0).toUpperCase()+t.slice(1)},w.sanitize_style=function(t){return e[t]||t},w.load_google_font=function(t,e,r){t&&"object"==typeof WebFont&&(e=e?e.replace("normal",""):"",r=r?r.replace("normal",""):"",-1===a.indexOf(t=e||r?t+":"+e+r:t)&&WebFont.load({google:{families:[t]}}),a.push(t))},w.append_select_options=function(t,e,o,n,i){t.find("option").not(":first").remove();var p="";D.each(e,function(t,e){var r=e,a=i?o&&-1!==o.indexOf(e)?" selected":"":o&&o===e?" selected":"";"subset"===n?r=w.sanitize_subset(e):"style"===n&&(r=w.sanitize_style(e)),p+='<option value="'+e+'"'+a+">"+r+"</option>"}),t.append(p).trigger("better-chat-support.change").trigger("chosen:updated")},w.init=function(){var n,i,p,s,c,l,h,d,b,u=[],t=k.find(".better-chat-support--typography"),f=k.find(".better-chat-support--type"),g=k.find(".better-chat-support--block-font-style"),v=t.data("unit"),_=t.data("line-height-unit"),e=t.data("exclude")?t.data("exclude").split(","):[],m=(k.find(".better-chat-support--chosen").length&&k.find("select").each(function(){var t=D(this),e=t.parent().find(".chosen-container");e.length&&e.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})}),k.find(".better-chat-support--font-family")),a=m.val(),o=(m.find("option").not(":first-child").remove(),""),C=(D.each(x,function(r,t){e&&-1!==e.indexOf(r)||(o+='<optgroup label="'+t.label+'">',D.each(t.fonts,function(t,e){o+='<option value="'+(e="object"==typeof e?t:e)+'" data-type="'+r+'"'+(e===a?" selected":"")+">"+e+"</option>"}),o+="</optgroup>")}),m.append(o).trigger("chosen:updated"),k.find(".better-chat-support--block-font-style")),S=(C.length&&(n=k.find(".better-chat-support--font-style-select"),i=n.val()?n.val().replace(/normal/g,""):"",n.on("change better-chat-support.change",function(t){var e=n.val(),r=(e=!e&&u&&-1===u.indexOf("normal")?u[0]:e)&&"italic"!==e&&"normal"===e?"normal":"",r=e&&"italic"!==e&&"normal"!==e?e.replace("italic",""):r,e=e&&"italic"===e.substr(-6)?"italic":"";k.find(".better-chat-support--font-weight").val(r),k.find(".better-chat-support--font-style").val(e)}),(p=k.find(".better-chat-support--block-extra-styles")).length)&&(s=k.find(".better-chat-support--extra-styles"),c=s.val()),k.find(".better-chat-support--block-subset")),y=(S.length&&(l=k.find(".better-chat-support--subset"),h=l.val(),d=l.data("multiple")||!1),k.find(".better-chat-support--block-backup-font-family")),B=(m.on("change better-chat-support.change",function(t){S.length&&S.addClass("hidden"),p.length&&p.addClass("hidden"),y.length&&y.addClass("hidden");var e,r,a=m.find(":selected"),o=a.val(),a=a.data("type");a&&o?("google"!==a&&"custom"!==a||!y.length||y.removeClass("hidden"),C.length&&(r=z,"google"===a&&x[a].fonts[o][0]?r=x[a].fonts[o][0]:"custom"===a&&x[a].fonts[o]&&(r=x[a].fonts[o]),e=-1!==(u=r).indexOf("normal")?"normal":r[0],e=i&&-1!==r.indexOf(i)?i:e,w.append_select_options(n,r,e,"style"),i=!1,C.removeClass("hidden"),"google"===a)&&p.length&&1<r.length&&(w.append_select_options(s,r,c,"style",!0),c=!1,p.removeClass("hidden")),"google"===a&&S.length&&x[a].fonts[o][1]&&(r=(e=x[a].fonts[o][1]).length<2&&"latin"!==e[0]?e[0]:"",o=h&&-1!==e.indexOf(h)?h:r,o=d&&h?h:o,w.append_select_options(l,e,o,"subset",d),h=!1,S.removeClass("hidden"))):(g.find(":input").val(""),S.length&&(l.find("option").not(":first-child").remove(),l.trigger("chosen:updated")),C.length&&(n.find("option").not(":first-child").remove(),n.trigger("chosen:updated"))),f.val(a)}).trigger("better-chat-support.change"),k.find(".better-chat-support--block-preview"));B.length&&(b=k.find(".better-chat-support--preview"),k.on("change",O.helper.debounce(function(t){B.removeClass("hidden");var e=m.val(),r=k.find(".better-chat-support--font-weight").val(),a=k.find(".better-chat-support--font-style").val(),o=k.find(".better-chat-support--font-size").val(),n=k.find(".better-chat-support--font-variant").val(),i=k.find(".better-chat-support--line-height").val(),p=k.find(".better-chat-support--text-align").val(),s=k.find(".better-chat-support--text-transform").val(),c=k.find(".better-chat-support--text-decoration").val(),l=k.find(".better-chat-support--color").val(),h=k.find(".better-chat-support--word-spacing").val(),d=k.find(".better-chat-support--letter-spacing").val(),u=k.find(".better-chat-support--custom-style").val(),f=("google"===k.find(".better-chat-support--type").val()&&w.load_google_font(e,r,a),{});e&&(f.fontFamily=e),r&&(f.fontWeight=r),a&&(f.fontStyle=a),n&&(f.fontVariant=n),o&&(f.fontSize=o+v),i&&(f.lineHeight=i+_),d&&(f.letterSpacing=d+v),h&&(f.wordSpacing=h+v),p&&(f.textAlign=p),s&&(f.textTransform=s),c&&(f.textDecoration=c),l&&(f.color=l),b.removeAttr("style"),u&&b.attr("style",u),b.css(f)},100)),B.on("click",function(){b.toggleClass("better-chat-support--black-background");var t=B.find(".better-chat-support--toggle");t.hasClass("fa-toggle-off")?t.removeClass("fa-toggle-off").addClass("fa-toggle-on"):t.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),B.hasClass("hidden")||k.trigger("change"))},w.init()})},D.fn.BetterChatSupport_field_upload=function(){return this.each(function(){var e,t=D(this),r=t.find("input"),a=t.find(".better-chat-support--button"),o=t.find(".better-chat-support--remove"),n=t.find(".better-chat-support--preview"),i=t.find(".better-chat-support--src"),p=a.data("library")&&a.data("library").split(",")||"";a.on("click",function(t){t.preventDefault(),void 0!==_.wp&&_.wp.media&&_.wp.media.gallery&&(e||(e=_.wp.media({library:{type:p}})).on("select",function(){var t=e.state().get("selection").first().attributes;p.length&&-1===p.indexOf(t.subtype)&&-1===p.indexOf(t.type)||r.val(t.url).trigger("change")}),e.open())}),o.on("click",function(t){t.preventDefault(),r.val("").trigger("change")}),r.on("change",function(t){var e=r.val();e?o.removeClass("hidden"):o.addClass("hidden"),n.length&&(-1!==D.inArray(e.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(n.removeClass("hidden"),i.attr("src",e)):n.addClass("hidden"))})})},D.fn.BetterChatSupport_field_wp_editor=function(){return this.each(function(){var t,e,r,a,o,n,i,p;void 0!==_.wp.editor&&void 0!==_.tinyMCEPreInit&&void 0!==_.tinyMCEPreInit.mceInit.BetterChatSupport_wp_editor&&(e=(t=D(this)).find(".better-chat-support-wp-editor"),r=t.find("textarea"),(t.find(".wp-editor-wrap").length||t.find(".mce-container").length)&&(e.empty(),e.append(r),r.css("display","")),a=O.helper.uid("better-chat-support-editor-"),r.attr("id",a),o={tinymce:_.tinyMCEPreInit.mceInit.BetterChatSupport_wp_editor,quicktags:_.tinyMCEPreInit.qtInit.BetterChatSupport_wp_editor},n=e.data("editor-settings"),(p=wp.oldEditor||wp.editor)&&p.hasOwnProperty("autop")&&(wp.editor.autop=p.autop,wp.editor.removep=p.removep,wp.editor.initialize=p.initialize),o.tinymce=D.extend({},o.tinymce,{selector:"#"+a,setup:function(e){e.on("change keyup",function(){var t=n.wpautop?e.getContent():wp.editor.removep(e.getContent());r.val(t).trigger("change")})}}),!1===n.tinymce&&(o.tinymce=!1,e.addClass("better-chat-support-no-tinymce")),!1===n.quicktags&&(o.quicktags=!1,e.addClass("better-chat-support-no-quicktags")),i=setInterval(function(){t.is(":visible")&&(_.wp.editor.initialize(a,o),clearInterval(i))}),n.media_buttons)&&_.BetterChatSupport_media_buttons&&((p=e.find(".wp-media-buttons")).length?p.find(".better-chat-support-shortcode-button").data("editor-id",a):((p=D(_.BetterChatSupport_media_buttons)).find(".better-chat-support-shortcode-button").data("editor-id",a),e.prepend(p)))})},D.fn.BetterChatSupport_confirm=function(){return this.each(function(){D(this).on("click",function(t){var e=D(this).data("confirm")||_.BetterChatSupport_vars.i18n.confirm;if(!confirm(e))return t.preventDefault(),!1;O.vars.is_confirm=!0,O.vars.form_modified=!1})})},D.fn.serializeObject=function(){var a={};return D.each(this.serializeArray(),function(t,e){var r=e.name,e=e.value;a[r]=a[r]===C?e:D.isArray(a[r])?a[r].concat(e):[a[r],e]}),a},D.fn.BetterChatSupport_save=function(){return this.each(function(){var a,o=D(this),n=D(".better-chat-support-save"),i=D(".better-chat-support-options"),p=!1;o.on("click",function(t){var e,r;p||(e=o.data("save"),r=o.val(),n.attr("value",e),o.hasClass("better-chat-support-save-ajax")?(t.preventDefault(),i.addClass("better-chat-support-saving"),n.prop("disabled",!0),_.wp.ajax.post("BetterChatSupport_"+i.data("unique")+"_ajax_save",{data:D("#better-chat-support-form").serializeJSONBetterChatSupport()}).done(function(t){D(".better-chat-support-error").remove(),Object.keys(t.errors).length&&(o='<i class="better-chat-support-label-error better-chat-support-error">!</i>',D.each(t.errors,function(t,e){var t=D('[data-depend-id="'+t+'"]'),r=D('a[href="#tab='+t.closest(".better-chat-support-section").data("section-id")+'"]'),a=r.closest(".better-chat-support-tab-item");t.closest(".better-chat-support-fieldset").append('<p class="better-chat-support-error better-chat-support-error-text">'+e+"</p>"),r.find(".better-chat-support-error").length||r.append(o),a.find(".better-chat-support-arrow .better-chat-support-error").length||a.find(".better-chat-support-arrow").append(o)})),i.removeClass("better-chat-support-saving"),n.prop("disabled",!1).attr("value",r),p=!1,O.vars.form_modified=!1,O.vars.$form_warning.hide(),clearTimeout(a);var o,e=D(".better-chat-support-form-success");e.empty().append(t.notice).fadeIn("fast",function(){a=setTimeout(function(){e.fadeOut("fast")},1e3)})}).fail(function(t){alert(t.error)})):O.vars.form_modified=!1),p=!0})})},D.fn.BetterChatSupport_options=function(){return this.each(function(){var t=D(this),e=t.find(".better-chat-support-content"),r=t.find(".better-chat-support-form-success"),a=t.find(".better-chat-support-form-warning"),o=t.find(".better-chat-support-header .better-chat-support-save");(O.vars.$form_warning=a).length&&(_.onbeforeunload=function(){return!!O.vars.form_modified||C},e.on("change keypress",":input",function(){O.vars.form_modified||(r.hide(),a.fadeIn("fast"),O.vars.form_modified=!0)})),r.hasClass("better-chat-support-form-show")&&setTimeout(function(){r.fadeOut("fast")},1e3),D(m).keydown(function(t){if((t.ctrlKey||t.metaKey)&&83===t.which)return o.trigger("click"),t.preventDefault(),!1})})},D.fn.BetterChatSupport_taxonomy=function(){return this.each(function(){var t,e,r=D(this),a=r.parents("form");"addtag"===a.attr("id")&&(t=a.find("#submit"),e=r.find(".better-chat-support-field").BetterChatSupport_clone(),t.on("click",function(){a.find(".form-required").hasClass("form-invalid")||(r.data("inited",!1),r.empty(),r.html(e),e=e.BetterChatSupport_clone(),r.BetterChatSupport_reload_script())}))})},D.fn.BetterChatSupport_shortcode=function(){var v=this;return v.shortcode_parse=function(t,r){var a="";return D.each(t,function(t,e){a+="["+(r=r||t),D.each(e,function(t,e){"content"===t?a=(a+="]")+e+"[/"+r:a+=v.shortcode_tags(t,e)}),a+="]"}),a},v.shortcode_tags=function(t,e){var r="";return""!==e&&("object"!=typeof e||D.isArray(e)?r+=" "+t+'="'+e.toString()+'"':D.each(e,function(t,e){""!==(e="background-image"===t?e.url||"":e)&&(r+=" "+t+'="'+e.toString()+'"')})),r},v.insertAtChars=function(t,e){t=void 0!==t[0].name?t[0]:t;return t.value.length&&void 0!==t.selectionStart?(t.focus(),t.value.substring(0,t.selectionStart)+e+t.value.substring(t.selectionEnd,t.value.length)):(t.focus(),e)},v.send_to_editor=function(t,e){var r;(r="undefined"!=typeof tinymce?tinymce.get(e):r)&&!r.isHidden()?r.execCommand("mceInsertContent",!1,t):(r=D("#"+e)).val(v.insertAtChars(r,t)).trigger("change")},this.each(function(){var o,n,i,r,p,s,c,a,l,h=D(this),d=h.find(".better-chat-support-modal-load"),u=(h.find(".better-chat-support-modal-content"),h.find(".better-chat-support-modal-insert")),f=h.find(".better-chat-support-modal-loading"),e=h.find("select"),b=h.data("modal-id"),g=h.data("nonce");D(m).on("click",'.better-chat-support-shortcode-button[data-modal-id="'+b+'"]',function(t){t.preventDefault(),l=D(this),o=l.data("editor-id")||!1,n=l.data("target-id")||!1,i=l.data("gutenberg-id")||!1,h.removeClass("hidden"),h.hasClass("better-chat-support-shortcode-single")&&p===C&&e.trigger("change")}),e.on("change",function(){var t=D(this),e=t.find(":selected");r=t.val(),p=e.data("shortcode"),s=e.data("view")||"normal",c=e.data("group")||p,d.empty(),r?(f.show(),_.wp.ajax.post("better-chat-support-get-shortcode-"+b,{shortcode_key:r,nonce:g}).done(function(t){f.hide();t=D(t.content).appendTo(d);u.parent().removeClass("hidden"),a=t.find(".better-chat-support--repeat-shortcode").BetterChatSupport_clone(),t.BetterChatSupport_reload_script(),t.find(".better-chat-support-fields").BetterChatSupport_reload_script()})):u.parent().addClass("hidden")}),u.on("click",function(t){if(t.preventDefault(),!u.prop("disabled")&&!u.attr("disabled")){var r="",e=h.find(".better-chat-support-field:not(.better-chat-support-depend-on)").find(":input:not(.ignore)").serializeObjectBetterChatSupport();switch(s){case"contents":var a=p?e[p]:e;D.each(a,function(t,e){t=p||t;r+="["+t+"]"+e+"[/"+t+"]"});break;case"group":r+="["+p,D.each(e[p],function(t,e){r+=v.shortcode_tags(t,e)}),r=(r=(r+="]")+v.shortcode_parse(e[c],c))+("[/"+p+"]");break;case"repeater":r+=v.shortcode_parse(e[c],c);break;default:r+=v.shortcode_parse(e)}r=""===r?"["+p+"]":r,i?(t=_.BetterChatSupport_gutenberg_props.attributes.hasOwnProperty("shortcode")?_.BetterChatSupport_gutenberg_props.attributes.shortcode:"",_.BetterChatSupport_gutenberg_props.setAttributes({shortcode:t+r})):o?v.send_to_editor(r,o):(t=n?D(n):l.parent().find("textarea")).val(v.insertAtChars(t,r)).trigger("change"),h.addClass("hidden")}}),h.on("click",".better-chat-support--repeat-button",function(t){t.preventDefault();var t=h.find(".better-chat-support--repeatable"),e=a.BetterChatSupport_clone(),r=e.find(".better-chat-support-repeat-remove");e.appendTo(t);e.find(".better-chat-support-fields").BetterChatSupport_reload_script(),O.helper.name_nested_replace(h.find(".better-chat-support--repeat-shortcode"),c),r.on("click",function(){e.remove(),O.helper.name_nested_replace(h.find(".better-chat-support--repeat-shortcode"),c)})}),h.on("click",".better-chat-support-modal-close, .better-chat-support-modal-overlay",function(){h.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var e=6-t.length-1;0<=e;e--)t="0"+t;return"#"+t}),O.funcs.parse_color=function(t){var t=t.replace(/\s+/g,""),e=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:e,rgba:e<100}},D.fn.BetterChatSupport_color=function(){return this.each(function(){var i,p=D(this),r=O.funcs.parse_color(p.val()),t=!_.BetterChatSupport_vars.color_palette.length||_.BetterChatSupport_vars.color_palette;p.hasClass("wp-color-picker")&&p.closest(".wp-picker-container").after(p).remove(),p.wpColorPicker({palettes:t,change:function(t,e){e=e.color.toString();i.removeClass("better-chat-support--transparent-active"),i.find(".better-chat-support--transparent-offset").css("background-color",e),p.val(e).trigger("change")},create:function(){i=p.closest(".wp-picker-container");var a=p.data("a8cIris"),t=D('<div class="better-chat-support--transparent-wrap"><div class="better-chat-support--transparent-slider"></div><div class="better-chat-support--transparent-offset"></div><div class="better-chat-support--transparent-text"></div><div class="better-chat-support--transparent-button">transparent <i class="icofont-toggle-off"></i></div></div>').appendTo(i.find(".wp-picker-holder")),o=t.find(".better-chat-support--transparent-slider"),n=t.find(".better-chat-support--transparent-text"),e=t.find(".better-chat-support--transparent-offset"),t=t.find(".better-chat-support--transparent-button");"transparent"===p.val()&&i.addClass("better-chat-support--transparent-active"),t.on("click",function(){"transparent"!==p.val()?(p.val("transparent").trigger("change").removeClass("iris-error"),i.addClass("better-chat-support--transparent-active")):(p.val(a._color.toString()).trigger("change"),i.removeClass("better-chat-support--transparent-active"))}),o.slider({value:r.transparent,step:1,min:0,max:100,slide:function(t,e){e=parseFloat(e.value/100);a._color._alpha=e,p.wpColorPicker("color",a._color.toString()),n.text(1===e||0===e?"":e)},create:function(){var t=parseFloat(r.transparent/100);n.text(t<1?t:""),e.css("background-color",r.value),i.on("click",".wp-picker-clear",function(){a._color._alpha=1,n.text(""),o.slider("option","value",100),i.removeClass("better-chat-support--transparent-active"),p.trigger("change")}),i.on("click",".wp-picker-default",function(){var t=O.funcs.parse_color(p.data("default-color")),e=parseFloat(t.transparent/100),r=e<1?e:"";a._color._alpha=e,n.text(r),o.slider("option","value",t.transparent),"transparent"===t.value&&(p.removeClass("iris-error"),i.addClass("better-chat-support--transparent-active"))})}})}})})},D.fn.BetterChatSupport_chosen=function(){return this.each(function(){var r,n,i=D(this),t=i.parent().find(".chosen-container"),e=i.hasClass("better-chat-support-chosen-sortable")||!1,a=i.hasClass("better-chat-support-chosen-ajax")||!1,o=i.attr("multiple")||!1,p=D.extend({allow_single_deselect:!0,disable_search_threshold:10,width:o?"100%":"auto",no_results_text:_.BetterChatSupport_vars.i18n.no_results_text},i.data("chosen-settings"));t.length&&t.remove(),a?(t=D.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:_.BetterChatSupport_vars.i18n.typing_text,searching_text:_.BetterChatSupport_vars.i18n.searching_text,no_results_text:_.BetterChatSupport_vars.i18n.no_results_text},i.data("chosen-settings")),i.BetterChatSupportAjaxChosen(t)):i.chosen(p),o&&(a=(r=i.parent().find(".better-chat-support-hide-select")).val()||[],i.on("change",function(t,e){e&&e.selected?r.append('<option value="'+e.selected+'" selected="selected">'+e.selected+"</option>"):e&&e.deselected&&r.find('option[value="'+e.deselected+'"]').remove(),_.wp.customize!==C&&0===r.children().length&&r.data("customize-setting-link")&&_.wp.customize.control(r.data("customize-setting-link")).setting.set(""),r.trigger("change")}),i.BetterChatSupportChosenOrder(a,!0)),e&&((n=i.parent().find(".chosen-container").find(".chosen-choices")).bind("mousedown",function(t){D(t.target).is("span")&&t.stopPropagation()}),n.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(t,e){e.placeholder.width(e.item.innerWidth()),e.placeholder.height(e.item.innerHeight())},update:function(t,e){var a="",o=i.data("chosen"),r=i.parent().find(".better-chat-support-hide-select");n.find(".search-choice-close").each(function(){var r=D(this).data("option-array-index");D.each(o.results_data,function(t,e){e.array_index===r&&(a+='<option value="'+e.value+'" selected>'+e.value+"</option>")})}),r.children().remove(),r.append(a),r.trigger("change")}}))})},D.fn.BetterChatSupport_checkbox=function(){return this.each(function(){var t=D(this),e=t.find(".better-chat-support--input"),r=t.find(".better-chat-support--checkbox");r.on("click",function(){e.val(Number(r.prop("checked"))).trigger("change")})})},D.fn.BetterChatSupport_checkbox_all=function(){return this.each(function(){var r=D(this);r.on("click",function(){var t=r.closest(".better-chat-support-field-checkbox").find(":input"),e=!1;t.each(function(){D(this).prop("checked")||(e=!0)}),e?(t.prop("checked","checked"),t.attr("checked","checked")):(t.prop("checked",""),t.removeAttr("checked")),t.first().trigger("change")})})},D.fn.BetterChatSupport_siblings=function(){return this.each(function(){var e=D(this),t=e.find(".better-chat-support--sibling"),r=e.data("multiple")||!1;t.on("click",function(){var t=D(this);r?(t.hasClass("better-chat-support--active")?(t.removeClass("better-chat-support--active"),t.find("input").prop("checked",!1)):(t.addClass("better-chat-support--active"),t.find("input").prop("checked",!0))).trigger("change"):(e.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("better-chat-support--active").siblings().removeClass("better-chat-support--active"))})})},D.fn.BetterChatSupport_help=function(){return this.each(function(){var e,r,a=D(this);a.on({mouseenter:function(){e=D('<div class="better-chat-support-tooltip"></div>').html(a.find(".better-chat-support-help-text").html()).appendTo("body"),r=O.vars.is_rtl?a.offset().left-e.outerWidth():a.offset().left+32;var t=a.offset().top-(e.outerHeight()/2-6);0<a.find(".better-chat-support-tooltip").length&&(t=a.offset().top+46,r=a.offset().left-249),D(e).addClass("better-chat-support-tooltip-hover-effect"),e.css({top:t,left:r,textAlign:"left"})},mouseleave:function(){e.is(":hover")||(D(this).removeClass("better-chat-support-tooltip-hover-effect"),e.addClass("better-chat-support-fade-out"),e.on("transitionend",function(){e.remove()}))}}),D("body").on("mouseleave",".better-chat-support-tooltip",function(){e!==C&&(D(this).removeClass("better-chat-support-tooltip-hover-effect"),e.addClass("better-chat-support-fade-out"),e.on("transitionend",function(){e.remove()}))})})},D.fn.BetterChatSupport_customizer_refresh=function(){return this.each(function(){var t=D(this),e=t.closest(".better-chat-support-customize-complex");if(e.length){var r=e.data("unique-id");if(r===C)return;var a=e.find(":input"),e=e.data("option-id"),a=a.serializeObjectBetterChatSupport(),a=!D.isEmptyObject(a)&&a[r]&&a[r][e]?a[r][e]:"",r=_.wp.customize.control(r+"["+e+"]");r.setting._value=null,r.setting.set(a)}else t.find(":input").first().trigger("change");D(m).trigger("better-chat-support-customizer-refresh",t)})},D.fn.BetterChatSupport_customizer_listen=function(t){var o=D.extend({closest:!1},t);return this.each(function(){var e,t,r,a;_.wp.customize!==C&&(t=(e=o.closest?D(this).closest(".better-chat-support-customize-complex"):D(this)).find(":input"),r=e.data("unique-id"),a=e.data("option-id"),r!==C)&&t.on("change keyup better-chat-support.change",function(){var t=e.find(":input").serializeObjectBetterChatSupport(),t=!D.isEmptyObject(t)&&t[r]&&t[r][a]?t[r][a]:"";_.wp.customize.control(r+"["+a+"]").setting.set(t)})})},D(m).on("expanded",".control-section",function(){var t,e,r=D(this);r.hasClass("open")&&!r.data("inited")&&(t=r.find(".better-chat-support-customize-field"),e=r.find(".better-chat-support-customize-complex"),t.length&&(r.BetterChatSupport_dependency(),t.BetterChatSupport_reload_script({dependency:!1}),e.BetterChatSupport_customizer_listen()),r.data("inited",!0))}),O.vars.$window.on("resize better-chat-support.resize",O.helper.debounce(function(t){(-1<navigator.userAgent.indexOf("AppleWebKit/")?O.vars.$window.width():_.innerWidth)<=782&&!O.vars.onloaded&&(D(".better-chat-support-section").BetterChatSupport_reload_script(),O.vars.onloaded=!0)},200)).trigger("better-chat-support.resize"),D.fn.BetterChatSupport_widgets=function(){return this.each(function(){D(m).on("widget-added widget-updated",function(t,e){e=e.find(".better-chat-support-fields");e.length&&e.BetterChatSupport_reload_script()}),D(m).on("click",".widget-top",function(t){var e=D(this).parent().find(".better-chat-support-fields");e.length&&e.BetterChatSupport_reload_script()}),D(".widgets-sortables, .control-section-sidebar").on("sortstop",function(t,e){e.item.find(".better-chat-support-fields").BetterChatSupport_reload_script_retry()})})},D.fn.BetterChatSupport_nav_menu=function(){return this.each(function(){var t=D(this);t.on("click","a.item-edit",function(){D(this).closest("li.menu-item").find(".better-chat-support-fields").BetterChatSupport_reload_script()}),t.on("sortstop",function(t,e){e.item.find(".better-chat-support-fields").BetterChatSupport_reload_script_retry()})})},D.fn.BetterChatSupport_reload_script_retry=function(){return this.each(function(){var t=D(this);t.data("inited")&&t.children(".better-chat-support-field-wp_editor").BetterChatSupport_field_wp_editor()})},D.fn.BetterChatSupport_reload_script=function(t){var e=D.extend({dependency:!0},t);return this.each(function(){var t=D(this);t.data("inited")||(t.children(".better-chat-support-field-accordion").BetterChatSupport_field_accordion(),t.children(".better-chat-support-field-backup").BetterChatSupport_field_backup(),t.children(".better-chat-support-field-background").BetterChatSupport_field_background(),t.children(".better-chat-support-field-code_editor").BetterChatSupport_field_code_editor(),t.children(".better-chat-support-field-date").BetterChatSupport_field_date(),t.children(".better-chat-support-field-datetime").BetterChatSupport_field_datetime(),t.children(".better-chat-support-field-fieldset").BetterChatSupport_field_fieldset(),t.children(".better-chat-support-field-gallery").BetterChatSupport_field_gallery(),t.children(".better-chat-support-field-group").BetterChatSupport_field_group(),t.children(".better-chat-support-field-icon").BetterChatSupport_field_icon(),t.children(".better-chat-support-field-link").BetterChatSupport_field_link(),t.children(".better-chat-support-field-media").BetterChatSupport_field_media(),t.children(".better-chat-support-field-map").BetterChatSupport_field_map(),t.children(".better-chat-support-field-repeater").BetterChatSupport_field_repeater(),t.children(".better-chat-support-field-slider").BetterChatSupport_field_slider(),t.children(".better-chat-support-field-sortable").BetterChatSupport_field_sortable(),t.children(".better-chat-support-field-sorter").BetterChatSupport_field_sorter(),t.children(".better-chat-support-field-spinner").BetterChatSupport_field_spinner(),t.children(".better-chat-support-field-switcher").BetterChatSupport_field_switcher(),t.children(".better-chat-support-field-section_tab").BetterChatSupport_field_section_tab(),t.children(".better-chat-support-field-tabbed").BetterChatSupport_field_tabbed(),t.children(".better-chat-support-field-typography").BetterChatSupport_field_typography(),t.children(".better-chat-support-field-upload").BetterChatSupport_field_upload(),t.children(".better-chat-support-field-wp_editor").BetterChatSupport_field_wp_editor(),t.children(".better-chat-support-field-border").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-background").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-color").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-color_group").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-link_color").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-typography").find(".better-chat-support-color").BetterChatSupport_color(),t.children(".better-chat-support-field-select").find(".better-chat-support-chosen").BetterChatSupport_chosen(),t.children(".better-chat-support-field-checkbox").find(".better-chat-support-checkbox").BetterChatSupport_checkbox(),t.children(".better-chat-support-field-checkbox").find(".better-chat-support-checkbox-all").BetterChatSupport_checkbox_all(),t.children(".better-chat-support-field-button_set").find(".better-chat-support-siblings").BetterChatSupport_siblings(),t.children(".better-chat-support-field-image_select").find(".better-chat-support-siblings").BetterChatSupport_siblings(),t.children(".better-chat-support-field-layout_preset").find(".better-chat-support-siblings").BetterChatSupport_siblings(),t.children(".better-chat-support-field-palette").find(".better-chat-support-siblings").BetterChatSupport_siblings(),t.children(".better-chat-support-field").find(".better-chat-support-help").BetterChatSupport_help(),e.dependency&&t.BetterChatSupport_dependency(),t.data("inited",!0),D(m).trigger("better-chat-support-reload-script",t))})},D(m).ready(function(){D(".better-chat-support-save").BetterChatSupport_save(),D(".better-chat-support-options").BetterChatSupport_options(),D(".better-chat-support-sticky-header").BetterChatSupport_sticky(),D(".better-chat-support-nav-options").BetterChatSupport_nav_options(),D(".better-chat-support-nav-metabox").BetterChatSupport_nav_metabox(),D(".better-chat-support-taxonomy").BetterChatSupport_taxonomy(),D(".better-chat-support-page-templates").BetterChatSupport_page_templates(),D(".better-chat-support-post-formats").BetterChatSupport_post_formats(),D(".better-chat-support-shortcode").BetterChatSupport_shortcode(),D(".better-chat-support-search").BetterChatSupport_search(),D(".better-chat-support-confirm").BetterChatSupport_confirm(),D(".better-chat-support-expand-all").BetterChatSupport_expand_all(),D(".better-chat-support-onload").BetterChatSupport_reload_script(),D("#widgets-editor").BetterChatSupport_widgets(),D("#widgets-right").BetterChatSupport_widgets(),D("#menu-to-edit").BetterChatSupport_nav_menu(),D(m).on("click","#shortcode_copy",function(t){t.preventDefault(),D(this).siblings("#shortcode").select(),m.execCommand("copy"),D(".shortcode_after_copy").animate({opacity:1,bottom:25},300),setTimeout(function(){jQuery(".shortcode_after_copy").animate({opacity:0},200),jQuery(".shortcode_after_copy").animate({bottom:0},0)},2e3)}),D(".BetterChatSupport").removeClass("better-chat-support-preloader")}),D.fn.getFieldInfo=function(){var a=["All Fields: {form_fields}"];return this.find(".better-chat-support-cloneable-item").each(function(t){var e=D(this),r=e.find(".field_select_items_select select").val();["recaptcha","checkbox","submit"].includes(r)||(e=e.find('.field_select_label input[type="text"]').val()||e.find('input[type="text"]:visible').val()||"Field Label",r&&a.push(e+`: {${r}_${t+1}}`))}),a.push("Global Vars: {siteTitle}, {siteEmail}, {currentURL}, {currentTitle}, {siteURL}, {ip}, {date}","{PRODUCT_START} WooCommerce Vars: {productName}, {productSlug}, {productSku}, {productPrice}, {productRegularPrice}, {productSalePrice}, {productStockStatus} {PRODUCT_END}","<b>Conditional Blocks:</b> {PRODUCT_START} ... {PRODUCT_END}, {NOT_PRODUCT_START} ... {NOT_PRODUCT_END}, {LOGGEDIN_START} ... {LOGGEDIN_END}, {NOT_LOGGEDIN_START} ... {NOT_LOGGEDIN_END}"),a.join("<br>")},D(m).ready(function(){function t(){var t=D(".better-chat-support-form-fields-wrapper"),e=D(".message_variables");e.length&&t.length&&(t=t.find(".better-chat-support-cloneable-wrapper").getFieldInfo(),e.html(t))}setTimeout(t,100),D(m).on("change",".field_select_items_select select",function(){setTimeout(t,100)}),D(m).on("keyup input change",'.better-chat-support-cloneable-item input[type="text"]',function(){t()}),D(".better-chat-support-cloneable-wrapper").on("better-chat-support.field-info-update",function(){t()})}),D(m).on("click",".wrapper_class_form",function(){D(".better-chat-support--active.wrapper_class_form").length&&D('.better_chat_support_type_of_whatsapp input[value="number"]').prop("checked",!0).trigger("change")}),D(m).on("keyup change","#better-chat-support-form",function(t){t.preventDefault(),D(this).find(".better-chat-support-save.better-chat-support-save-ajax").css({"background-color":"#1a74e4","pointer-events":"initial"}).val("Save Settings")}),D(m).on("click change","#better-chat-support-form .better-chat-support-cloneable-helper, #better-chat-support-form .better-chat-support-cloneable-helper .sp_wgs-icon-clone, #better-chat-support-form .better-chat-support-cloneable-helper .sp_wgs-icon-drag-and-drop, .better-chat-support-cloneable-add",function(t){t.preventDefault(),D("#better-chat-support-form").find(".better-chat-support-save.better-chat-support-save-ajax").css({"background-color":"#1a74e4","pointer-events":"initial"}).val("Save Settings")}),setTimeout(()=>{0==D("#better-chat-support-section-assign_layout .better-chat-support-cloneable-wrapper .better-chat-support-cloneable-item").length&&0<D("#better-chat-support-section-assign_layout .better-chat-support-cloneable-add").length&&D("#better-chat-support-section-assign_layout .better-chat-support-cloneable-add").trigger("click")},500),D(".better-chat-support-save").on("click",function(t){t.preventDefault(),D(this).css({"background-color":"#C5C5C6","pointer-events":"none","padding-left":"38px"}).val("Changes Saved")}),D("select option:contains((Pro))").attr("disabled",!0).css("opacity","1"),D(".switcher_pro_only .better-chat-support--switcher").attr("disabled","disabled").addClass("only_pro_switcher").css({background:"#B0BCC4"}),D(".only_pro_switcher").css({"pointer-events":"none",color:"#8796A1",position:"relative"}),D(".better-chat-support-pagination-type li:nth-child(n+2) input").attr("disabled",!0),D("label:contains((Pro))").css({"pointer-events":"none",opacity:"0.8","user-select":"none"}),D("label:contains((Pro)) input").attr("disabled",!0).css("opacity","1"),D("select option:contains((Pro))").attr("disabled",!0).css("opacity","1")})(jQuery,window,document);