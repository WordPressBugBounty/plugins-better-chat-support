let mSupport=document.querySelectorAll(".mSupport"),mSupportMulti=document.querySelectorAll(".mSupport-multi"),mSupportBubble=document.querySelectorAll(".mSupport-bubble"),currentTime=document.querySelector(".current-time"),mSupportUserAvailability=document.querySelectorAll(".mSupportUserAvailability"),mSupportSendMessage=document.querySelector(".mSupport__send-message"),mSupportMultiPopupContent=document.querySelector(".mSupport-multi__popup--content"),user=document.querySelector(".user"),today=new Date;if(null!==currentTime){let t=today.getHours()+":"+today.getMinutes()+":"+today.getSeconds();currentTime.innerText=t}let openChatBtn=()=>{mSupport.forEach(t=>{t.classList?.toggle("mSupport-show")}),mSupportMulti.forEach(t=>{t.classList?.toggle("mSupport-show")})};function is_available(t,e){let a=!1,i=!1;for(var r in t){var l;t.hasOwnProperty(r)&&get_day_of_week(r)==e.day()&&(r=t[r].split("-"),l=moment.tz(r[0],"HH:mm",e.tz()),r=moment.tz(r[1],"HH:mm",e.tz()),l.year(e.year()).month(e.month()).date(e.date()),r.year(e.year()).month(e.month()).date(e.date()),e.isBetween(l,r)?a=!0:e.isBefore(l)&&(i=!0))}return{is_available:a,almost_available:i}}function get_day_of_week(t){return"sunday"==(t=t.toLowerCase())?0:"monday"==t?1:"tuesday"==t?2:"wednesday"==t?3:"thursday"==t?4:"friday"==t?5:"saturday"==t?6:void 0}mSupportBubble.forEach(t=>{t.addEventListener("click",openChatBtn)});let searchInfo=mSupportMultiPopupContent?.getAttribute("data-search"),isGrid=document.querySelector(".mSupport-multi")?.classList.contains("mSupport-grid");function searchUser(){for(var t,e=document.getElementById("search-input").value.toUpperCase(),a=document.getElementById("multi-user").getElementsByClassName("user"),i=0;i<a.length;i++)-1<((t=a[i].getElementsByClassName("user__info--name")[0]).textContent||t.innerText).toUpperCase().indexOf(e)?a[i].style.display="":a[i].style.display="none"}void 0!==mSupportUserAvailability&&("true"===searchInfo&&mSupportMultiPopupContent.classList.add("mSupport-search"),3<mSupportUserAvailability.length&&!isGrid&&mSupportMultiPopupContent.classList.add("mSupport-scroll"),4<mSupportUserAvailability.length&&isGrid&&mSupportMultiPopupContent.classList.add("mSupport-scroll"),mSupportUserAvailability.forEach(t=>{let e=t.getAttribute("data-useravailability");t=t.getAttribute("data-timezone"),t=t?moment().tz(t):moment();is_available(JSON.parse(e),t).is_available||null==e?mSupportUserAvailability.forEach(t=>{t.getAttribute("data-useravailability")===e&&(t.classList.add("avatar-active"),t.classList.remove("avatar-inactive"))}):mSupportUserAvailability.forEach(t=>{t.getAttribute("data-useravailability")===e&&(t.classList.add("avatar-inactive"),t.setAttribute("disabled",""),t.classList.remove("avatar-active"))})}));let mSupportButtons=document.querySelectorAll(".mSupportButtons"),chatAvailability=(void 0!==mSupportButtons&&mSupportButtons.forEach(t=>{let e=t.getAttribute("data-btnavailablety");t=t.getAttribute("data-timezone"),t=t?moment().tz(t):moment();is_available(JSON.parse(e),t).is_available?mSupportButtons.forEach(t=>{t.getAttribute("data-btnavailablety")===e&&(t.classList.add("avatar-active"),t.classList.remove("avatar-inactive"))}):mSupportButtons.forEach(t=>{t.getAttribute("data-btnavailablety")===e&&(t.classList.add("avatar-inactive"),t.classList.remove("avatar-active"))})}),document.querySelector(".chat-availability"));if(chatAvailability){let i=chatAvailability.getAttribute("data-availability");if(void 0!==i){let t=chatAvailability.getAttribute("data-timezone"),e=t?moment().tz(t):moment(),a=is_available(JSON.parse(i),e);a.is_available||null==i?(chatAvailability.classList.add("avatar-active"),chatAvailability.classList.remove("avatar-inactive")):(chatAvailability.classList.add("avatar-inactive"),chatAvailability.classList.remove("avatar-active"))}}